{% extends "base.html" %}
{% load static %}
{% block content %}
  <div class="article-top-space"></div>
  <div class="marathon-page">
    <div class="marathon-list">
      <div>
        <p class="page-title">마라톤 참여 리스트</p>
      </div>

      {% csrf_token %}

      {% for key, value in group.items %}
        <div class="card-1">
          <p class="marathon-title">{{ value.0.marathon__title }}</p>
          <div class="flex-row">
            <p class="flex-row-item">날짜 :
              {{ value.0.marathon__date }}</p>
            <p class="flex-row-item">시간 :
              {{ value.0.marathon__time|slice:":5" }}</p>
          </div>
          <p class="city">{{ value.0.marathon__location_city }}
            |
            {{ value.0.marathon__location_cource }}</p>

          <div class="space-h30"></div>
          {% for item in value %}
            <div>
              <div class="flex-row">
                <p class="marathon-parti">{{ item.user__last_name }}{{ item.user__first_name }}
                  <p class="marathon-dist">{{ item.distance }}</p>
                </p>
                {% if request.user.id == item.user__id %}
                  <p class="flex-row-item">me</p>
                {% endif %}
              </div>
            </div>
          {% endfor %}
          {% if user.is_authenticated %}
            <form method="post" action="{% url 'marathon:parti_me' key %}">
              {% csrf_token %}
              <select name="distance" class="month-filter">
                <option value="full">Full</option>
                <option value="half">Half</option>
                <option value="10">10Km</option>
                <option value="5">5Km</option>
              </select>
              <input type="submit" value="Submit">
            </form>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock content %}
